var notErrorReporter=function(){"use strict";class e extends Error{constructor(e,t={},r=null){return super(e),this.options=t,this.adopt(r),this.fill(),this.getTime(),this}adopt(e){return e&&(this.parent=e),this}getTime(){let e=new Date;return this.env.date={timestamp:e.getTime(),offset:e.getTimezoneOffset()},this.env.date}fill(){return this.env={browser:!0,node:!1,location:{hash:window.location.hash,port:window.location.port,protocol:window.location.protocol,search:window.location.search,host:window.location.host,url:window.location.url,href:window.location.href,hostname:window.location.hostname,pathname:window.location.pathname},navigator:{appName:navigator.appName,appCodeName:navigator.appCodeName,appVersion:navigator.appVersion,userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language,product:navigator.product,onLine:navigator.onLine,cookieEnabled:navigator.cookieEnabled},window:{height:window.innerHeight,width:window.innerWidth}},this}}const t=window.console,r="https://appmon.ru/api/key/collect";return class{constructor(e=!1){return this.envFirst=e,this.processWatching=!1,this.origin={},this}setOrigin(e){this.origin=e}report(t,r){t instanceof e||(t=new e(t.message,{},t));let o=this.packError(t);return this._report(o,this.getReportURL(),r,"error")}reportError(t,r={},o=null,n){return this.report(new e(t,r,o),n)}parseStack(e){try{let t,r=[...e.split("\n")[3].matchAll(/\sat\s(.+)\s\((.+)\)/gi)][0],o=r[1].split("."),n=o[o.length-1],i=r[2].split(":"),a=i[0],s=i[1];return{functionName:n,type:t,fileName:a,lineNumber:parseInt(s)}}catch(e){return t.error(e),!1}}extractDataFromError(e){let t={columnNumber:e.columnNumber,fileName:e.fileName,lineNumber:e.lineNumber,name:e.name,message:e.message,stack:e.stack};if(t.stack){let e=this.parseStack(t.stack);e&&(t.fileName||(t.fileName=e.fileName),t.lineNumber||(t.lineNumber=e.lineNumber),t.functionName||(t.functionName=e.functionName),t.type||(t.type=e.type))}return t}packError(e){let t={};return Object.prototype.hasOwnProperty.call(e,"parent")&&void 0!==e.parent&&e.parent&&(t.parent=this.extractDataFromError(e.parent)),t.details=this.extractDataFromError(e),t.options=e.options,t.env=e.env,t.origin=this.origin,t}getReportURL(){return window.NOT_NODE_ERROR_URL_BROWSER&&window.NOT_NODE_ERROR_URL_BROWSER.length>0?window.NOT_NODE_ERROR_URL_BROWSER:r.length>0?r:"/api/error"}getReportKey(){return window.NOT_NODE_ERROR_KEY&&window.NOT_NODE_ERROR_KEY.length>0?window.NOT_NODE_ERROR_KEY:""}_report(e,t){let r={report:e,type:"error",key:this.getReportKey()};return fetch(t,{method:"PUT",cache:"no-cache",headers:{"Content-Type":"application/json; charset=utf-8"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(r)})}}}();
